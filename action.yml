#Still depends on triggering default gh deploy actions 
name: 'Zola CLI'
description: 'Run zola build/check (and deploy to GitHub Pages)'
author: 'Kenzi Connor'
branding:
  icon: 'book'  
  color: 'green'
runs:
  using: 'composite'
  steps:
    - name: Output variables
      shell: bash
      run: |
        echo '${{ toJSON(inputs) }}'
        echo '${{ env['ZOLA_INSTALLED'] }}'
    - name: Install zola
      if:  true && ! env.ZOLA_INSTALLED
      uses: taiki-e/install-action@zola
    - name: Store install state of zola for idempotency
      shell: bash
      run: |
        if command -v zola > /dev/null 2>&1; then
            echo "ZOLA_INSTALLED=true" >> $GITHUB_ENV
        fi